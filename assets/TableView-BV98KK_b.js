import{r as c,w as v,g as j,b as s,c as S,h as k,i as d,F as N,j as I,m as _,t as M,k as f,l as D,e as b,n as C,p as h,q as B,o as T,s as V,a as E,u as y,v as H}from"./index-dEzsoxEX.js";const F={key:0},q={__name:"BaseTable",props:{tableData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},options:{type:Object,default:()=>{}},listeners:{type:Object,default:()=>{}},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},emits:["update:currentPage","update:pageSize"],setup(x,{expose:z,emit:P}){const a=x,w=P,u=c(a.pageSize),n=c(a.currentPage);v(()=>a.currentPage,()=>{n.value=a.currentPage}),v(()=>a.pageSize,()=>{u.value=a.pageSize}),v(()=>u.value,()=>{w("update:pageSize",u.value)}),v(()=>n,()=>{w("update:currentPage",n)});const r=i=>i+(n.value-1)*u.value+1,e=c(null),m=j(()=>Object.assign({stripe:!1,tooltipEffect:"dark",showHeader:!0,showPagination:!0,border:!0,rowStyle:()=>"cursor:pointer"},a.options)),o=j(()=>Object.assign({},a==null?void 0:a.listeners)),O=j(()=>{var p;return Object.assign({layout:"prev, pager, next, jumper, ->, sizes, total",total:100,background:!0,hideOnSinglePage:!0,pagerCount:5,pageSizes:[10,20,30,50,100],small:!1,background:!1},(p=m.value)==null?void 0:p.paginationConfig)});return z({tableRef:e}),(i,p)=>{const R=D("el-table-column"),U=D("el-table"),$=D("el-pagination");return s(),S("div",null,[k(U,_({ref_key:"tableRef",ref:e,data:x.tableData},m.value,M(o.value)),{default:d(()=>[(s(!0),S(N,null,I(x.columns,(t,A)=>(s(),S(N,{key:A},[t.type==="index"||t.type==="selection"||t.type==="expand"?(s(),b(R,_({key:0,index:r,ref_for:!0},t),{default:d(({row:l,$index:g})=>[t.render?(s(),b(C(t.render),{key:0,row:l,index:g},null,8,["row","index"])):t.slot?h(i.$slots,t.slot,{key:1,row:l,index:g}):f("",!0)]),header:d(l=>[t.headerRender?(s(),b(C(t.headerRender),{key:0,scope:l},null,8,["scope"])):t.headerSlot?h(i.$slots,t.headerSlot,{key:1,scope:l}):f("",!0)]),_:2},1040)):(s(),b(R,_({key:1,ref_for:!0},t),{default:d(({row:l,$index:g})=>[t.render?(s(),b(C(t.render),{key:0,row:l,index:g},null,8,["row","index"])):t.slot?h(i.$slots,t.slot,{key:1,row:l,index:g}):f("",!0)]),header:d(({column:l,$index:g})=>[t.headerRender?(s(),b(C(t.headerRender),{key:0,column:l,index:g},null,8,["column","index"])):t.headerSlot?h(i.$slots,t.headerSlot,{key:1,column:l,index:g}):f("",!0)]),_:2},1040))],64))),128))]),_:3},16,["data"]),m.value.showPagination?(s(),S("div",F,[k($,_(O.value,{"current-page":n.value,"onUpdate:currentPage":p[0]||(p[0]=t=>n.value=t),"page-size":u.value,"onUpdate:pageSize":p[1]||(p[1]=t=>u.value=t)}),null,16,["current-page","page-size"])])):f("",!0)])}}},L={__name:"TableView",setup(x){const z=c([]),P=c([]),a=B({paginationConfig:{}}),w=B({"cell-click":(r,e)=>{console.log("row click",r,e),a.border=a.hasOwnProperty("border")?!a.border:!1}});T(()=>{z.value=[{id:1,name:"John",age:20},{id:2,name:"Mary",age:21},{id:3,name:"Bob",age:22}],P.value=[{label:"index",type:"index",width:80},{label:"ID",prop:"id"},{label:"Name",prop:"name",render:({row:r,index:e})=>V("span",{style:{color:"red"}},r.name),headerRender:({column:r,index:e})=>V("div",{style:{color:"blue"}},r.label)},{label:"Age",prop:"age",slot:"ageSlot",headerSlot:"ageHeaderSlot"}]});const u=c(1),n=c(30);return v(()=>u.value,(r,e)=>{console.log("outcurrentPage",r,e)}),v(()=>n.value,(r,e)=>{console.log("outpageSize",r,e)}),(r,e)=>{const m=D("el-button");return s(),S(N,null,[k(q,{tableData:z.value,columns:P.value,options:a,listeners:w,currentPage:u.value,"onUpdate:currentPage":e[0]||(e[0]=o=>u.value=o),pageSize:n.value,"onUpdate:pageSize":e[1]||(e[1]=o=>n.value=o)},{ageSlot:d(({row:o,index:O})=>[y(H(o.age)+"岁 ",1)]),ageHeaderSlot:d(({column:o})=>[y(H(o.label)+"多大了 ",1)]),_:1},8,["tableData","columns","options","listeners","currentPage","pageSize"]),E("div",null,[e[6]||(e[6]=y(" 测试按钮 ")),k(m,{onClick:e[2]||(e[2]=o=>n.value=10)},{default:d(()=>e[4]||(e[4]=[y("pagesize = 10")])),_:1}),k(m,{onClick:e[3]||(e[3]=o=>n.value=30)},{default:d(()=>e[5]||(e[5]=[y("pagesize = 30")])),_:1})])],64)}}};export{L as default};
