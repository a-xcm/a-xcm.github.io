import{_,b as l,o as n,e as u,a as c,t as m,n as y,i as g,F as h}from"./index-6QB7jilB.js";const x={key:0,"aria-label":"文件内容"},F=["src"],W={__name:"FileReader",setup(b){const f=l(""),d=l("black"),o=l(""),i=l(""),a=l(null);function t(s,e){f.value=s,d.value=e==="error"?"red":"green"}function v(s){const e=s.target.files[0];if(o.value="",i.value="",a.value=null,t("","info"),!e){t("未选择文件。请选择一个文件。","error");return}if(!(e.type.startsWith("text")||e.type.startsWith("image"))){t("不支持的文件类型。请选择文本或图片文件。","error");return}if(e.size>1024*1024*5){t("文件过大。请选择小于5MB的文件。","error");return}const r=new FileReader;r.onloadstart=()=>{t("正在读取文件，请稍候...","info")},r.onload=p=>{e.type.startsWith("text")?(o.value=p.target.result,a.value="text"):e.type.startsWith("image")&&(i.value=p.target.result,a.value="image"),t("文件读取完成。","info")},r.onerror=()=>{t("读取文件时出错。请重试。","error")},e.type.startsWith("text")?r.readAsText(e):e.type.startsWith("image")&&r.readAsDataURL(e)}return(s,e)=>(n(),u(h,null,[e[0]||(e[0]=c("div",null,"FileReader",-1)),c("input",{type:"file","aria-label":"选择文本文件",onChange:v},null,32),c("div",{role:"alert",style:y({color:d.value})},m(f.value),5),a.value==="text"?(n(),u("pre",x,m(o.value),1)):g("",!0),a.value==="image"?(n(),u("img",{key:1,src:i.value,alt:"预览图片",style:{"max-width":"100%","margin-top":"10px"}},null,8,F)):g("",!0)],64))}},R=_(W,[["__scopeId","data-v-6864fb87"]]);export{R as default};
