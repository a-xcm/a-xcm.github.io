import{_ as W,b as s,i as m,d as T,j as k,o as p,e as g,a as v,n as B,k as V,g as $,l as P}from"./index-DwFrZsBI.js";const U={class:"signature-container"},X=["width","height"],Y={__name:"Signature",props:{lineWidth:{type:Number,default:2},lineColor:{type:String,default:"#000"},bgColor:{type:String,default:"#fff"},width:{type:Number,default:300},height:{type:Number,default:200},modelValue:String},emits:["update:modelValue","confirm","clear"],setup(_,{emit:u}){const n=_,c=u,a=s(null),i=s(!1),r=s(0),h=s(0),o=window.devicePixelRatio||1,t=s(null),C=m(()=>n.width*o),y=m(()=>n.height*o),R=m(()=>({width:`${n.width}px`,height:`${n.height}px`,backgroundColor:n.bgColor}));T(()=>{M()});function M(){t.value=a.value.getContext("2d"),t.value.scale(o,o),t.value.lineWidth=n.lineWidth,t.value.lineCap="round",t.value.lineJoin="round",t.value.strokeStyle=n.lineColor,S()}function w(e){const l=a.value.getBoundingClientRect();return e.touches?{x:(e.touches[0].clientX-l.left)*o,y:(e.touches[0].clientY-l.top)*o}:{x:(e.clientX-l.left)*o,y:(e.clientY-l.top)*o}}function x(e){i.value=!0;const{x:l,y:d}=w(e);r.value=l,h.value=d,t.value.beginPath()}function b(e){if(!i.value)return;const{x:l,y:d}=w(e);t.value.moveTo(r.value,h.value),t.value.lineTo(l,d),t.value.stroke(),r.value=l,h.value=d}function f(){i.value=!1}function S(){t.value.fillStyle=n.bgColor,t.value.fillRect(0,0,C.value,y.value),c("clear")}function N(){const e=a.value.toDataURL();c("update:modelValue",e),c("confirm",e)}return k(()=>n.lineColor,e=>{t.value.strokeStyle=e}),k(()=>n.lineWidth,e=>{t.value.lineWidth=e}),(e,l)=>(p(),g("div",U,[v("canvas",{ref_key:"canvasRef",ref:a,width:C.value,height:y.value,style:B(R.value),onTouchstart:V(x,["prevent"]),onTouchmove:V(b,["prevent"]),onTouchend:f,onMousedown:x,onMousemove:b,onMouseup:f,onMouseleave:f},null,44,X),v("div",{class:"button-group"},[v("button",{onClick:S},"清除"),v("button",{onClick:N},"确认")])]))}},D=W(Y,[["__scopeId","data-v-515e092e"]]),E=["src"],j={__name:"Signature",setup(_){const u=s(""),n=a=>{console.log("确认签名:",a)},c=()=>{console.log("签名已清除")};return(a,i)=>(p(),g("div",null,[$(D,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=r=>u.value=r),onConfirm:n,onClear:c,width:400,height:300},null,8,["modelValue"]),u.value?(p(),g("img",{key:0,src:u.value,class:"preview"},null,8,E)):P("",!0)]))}};export{j as default};
