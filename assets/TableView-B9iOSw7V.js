import{b as m,j as v,i as N,r as y,o as s,e as P,g as S,w as d,F as R,m as I,c,p as w,q as h,s as C,l as f,t as M,v as B,d as T,x as V,h as D,y as H,a as E}from"./index-DwMMe-dX.js";const F={key:0},q={__name:"BaseTable",props:{tableData:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},options:{type:Object,default:()=>{}},listeners:{type:Object,default:()=>{}},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},emits:["update:currentPage","update:pageSize"],setup(k,{expose:x,emit:_}){const a=k,z=_,u=m(a.pageSize),n=m(a.currentPage);v(()=>a.currentPage,()=>{n.value=a.currentPage}),v(()=>a.pageSize,()=>{u.value=a.pageSize}),v(()=>u.value,()=>{z("update:pageSize",u.value)}),v(()=>n,()=>{z("update:currentPage",n)});const r=i=>i+(n.value-1)*u.value+1,t=m(null),b=N(()=>Object.assign({stripe:!1,tooltipEffect:"dark",showHeader:!0,showPagination:!0,border:!0,rowStyle:()=>"cursor:pointer"},a.options)),j=N(()=>Object.assign({},a==null?void 0:a.listeners)),o=N(()=>{var p;return Object.assign({layout:"prev, pager, next, jumper, ->, sizes, total",total:0,background:!0,hideOnSinglePage:!0,pagerCount:5,pageSizes:[10,20,30,50,100],small:!1,background:!1},(p=b.value)==null?void 0:p.paginationConfig)});return x({tableRef:t}),(i,p)=>{const O=y("el-table-column"),U=y("el-table"),$=y("el-pagination");return s(),P("div",null,[S(U,w({ref_key:"tableRef",ref:t,data:k.tableData},b.value,M(j.value)),{default:d(()=>[(s(!0),P(R,null,I(k.columns,(e,A)=>(s(),P(R,{key:A},[e.type==="index"||e.type==="selection"||e.type==="expand"?(s(),c(O,w({key:0,index:r,ref_for:!0},e),{default:d(({row:l,$index:g})=>[e.render?(s(),c(h(e.render),{key:0,row:l,index:g},null,8,["row","index"])):e.slot?C(i.$slots,e.slot,{key:1,row:l,index:g}):f("",!0)]),header:d(l=>[e.headerRender?(s(),c(h(e.headerRender),{key:0,scope:l},null,8,["scope"])):e.headerSlot?C(i.$slots,e.headerSlot,{key:1,scope:l}):f("",!0)]),_:2},1040)):(s(),c(O,w({key:1,ref_for:!0},e),{default:d(({row:l,$index:g})=>[e.render?(s(),c(h(e.render),{key:0,row:l,index:g},null,8,["row","index"])):e.slot?C(i.$slots,e.slot,{key:1,row:l,index:g}):f("",!0)]),header:d(({column:l,$index:g})=>[e.headerRender?(s(),c(h(e.headerRender),{key:0,column:l,index:g},null,8,["column","index"])):e.headerSlot?C(i.$slots,e.headerSlot,{key:1,column:l,index:g}):f("",!0)]),_:2},1040))],64))),128))]),_:3},16,["data"]),b.value.showPagination?(s(),P("div",F,[S($,w(o.value,{"current-page":n.value,"onUpdate:currentPage":p[0]||(p[0]=e=>n.value=e),"page-size":u.value,"onUpdate:pageSize":p[1]||(p[1]=e=>u.value=e)}),null,16,["current-page","page-size"])])):f("",!0)])}}},L={__name:"TableView",setup(k){const x=m([]),_=m([]),a=B({paginationConfig:{}}),z=B({"cell-click":(r,t)=>{console.log("row click",r,t),a.border=a.hasOwnProperty("border")?!a.border:!1}});T(()=>{x.value=[{id:1,name:"John",age:20},{id:2,name:"Mary",age:21},{id:3,name:"Bob",age:22}],_.value=[{label:"index",type:"index",width:80},{label:"ID",prop:"id"},{label:"Name",prop:"name",render:({row:r,index:t})=>V("span",{style:{color:"red"}},r.name),headerRender:({column:r,index:t})=>V("div",{style:{color:"blue"}},r.label)},{label:"Age",prop:"age",slot:"ageSlot",headerSlot:"ageHeaderSlot"}]});const u=m(1),n=m(30);return v(()=>u.value,(r,t)=>{console.log("outcurrentPage",r,t)}),v(()=>n.value,(r,t)=>{console.log("outpageSize",r,t)}),(r,t)=>{const b=y("el-button"),j=y("layout");return s(),c(j,null,{default:d(()=>[S(q,{tableData:x.value,columns:_.value,options:a,listeners:z,currentPage:u.value,"onUpdate:currentPage":t[0]||(t[0]=o=>u.value=o),pageSize:n.value,"onUpdate:pageSize":t[1]||(t[1]=o=>n.value=o)},{ageSlot:d(({row:o,index:i})=>[D(H(o.age)+"岁 ",1)]),ageHeaderSlot:d(({column:o})=>[D(H(o.label)+"多大了 ",1)]),_:1},8,["tableData","columns","options","listeners","currentPage","pageSize"]),E("div",null,[S(b,{onClick:t[2]||(t[2]=o=>n.value=10)},{default:d(()=>t[4]||(t[4]=[D("pagesize = 10")])),_:1}),S(b,{onClick:t[3]||(t[3]=o=>n.value=30)},{default:d(()=>t[5]||(t[5]=[D("pagesize = 30")])),_:1})])]),_:1})}}};export{L as default};
